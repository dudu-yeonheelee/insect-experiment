<!DOCTYPE html>
<html>
<head>
  <title>ê³¤ì¶© í˜ì˜¤ ì‹¤í—˜</title>
  <script src="https://unpkg.com/jspsych@7.3.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response"></script>
  <script src="https://unpkg.com/@jspsych/plugin-image-button-response"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-slider-response"></script>
  <link href="https://unpkg.com/jspsych@7.3.0/css/jspsych.css" rel="stylesheet" />
</head>
<body></body>
<script>
  const jsPsych = initJsPsych({
    on_finish: () => jsPsych.data.displayData()
  });

  const timeline = [];

  // Set A: ì‚¬ì „ í˜ì˜¤ë„ í‰ê°€ (ê³¤ì¶© ì¢…ë¥˜ë³„ ì´ë¯¸ì§€ 1ì¥)
  const setA_images = [
    {label: "ë°”í€´ë²Œë ˆ", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Periplaneta_americana.jpg/640px-Periplaneta_americana.jpg"},
    {label: "ê±°ë¯¸", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/European_garden_spider_2008.jpg/640px-European_garden_spider_2008.jpg"},
    {label: "êµ¬ë”ê¸°", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Maggots.jpg/640px-Maggots.jpg"},
    {label: "íŒŒë¦¬", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/Housefly.jpg/640px-Housefly.jpg"},
    {label: "ê°œë¯¸", image: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Ant_UK.jpg/640px-Ant_UK.jpg"}
  ];

  for (let i = 0; i < setA_images.length; i++) {
    timeline.push({
      type: jsPsychImageButtonResponse,
      stimulus: setA_images[i].image,
      choices: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"],
      prompt: `<p><strong>${setA_images[i].label}</strong> ì‚¬ì§„ì„ ë³´ê³  ëŠë‚€ í˜ì˜¤ ìˆ˜ì¤€ì„ 1~10 ì¤‘ ì„ íƒí•˜ì„¸ìš” (10 = ë§¤ìš° í˜ì˜¤).</p>`,
      data: { phase: "survey", insect: setA_images[i].label }
    });
  }

  // Set B: ë³¸ ì‹¤í—˜ìš© ì´ë¯¸ì§€ (ë°”í€´ë²Œë ˆë¡œ ì˜ˆì‹œ, 3ì¥ë§Œ ì‹œë²”)
  const setB_images = [
    "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Cockroach_close-up.jpg/640px-Cockroach_close-up.jpg",
    "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Cockroach_kitchen.jpg/640px-Cockroach_kitchen.jpg",
    "https://upload.wikimedia.org/wikipedia/commons/thumb/1/13/American_cockroach.jpg/640px-American_cockroach.jpg"
  ];

  for (let i = 0; i < setB_images.length; i++) {
    // ê³µí¬ ìê·¹ ë³´ì—¬ì£¼ê¸° + ì‹œê°„ ì¸¡ì •
    timeline.push({
      type: jsPsychImageButtonResponse,
      stimulus: setB_images[i],
      choices: ["ë‹¤ìŒ"],
      prompt: "ì‚¬ì§„ì„ ì¶©ë¶„íˆ ë³¸ í›„ 'ë‹¤ìŒ'ì„ ëˆ„ë¥´ì„¸ìš”.",
      data: { phase: "experiment", trial_num: i+1, image: setB_images[i] }
    });

    // ë³´ìƒ ìê·¹ (ì‹¤í—˜êµ° ì¡°ê±´ ê°€ì •)
    timeline.push({
      type: jsPsychHtmlButtonResponse,
      stimulus: '<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Cute-dog.jpg/640px-Cute-dog.jpg" width="400"><p>ì˜í•˜ì…¨ì–´ìš”! ê·€ì—¬ìš´ ë³´ìƒ ì´ë¯¸ì§€ì…ë‹ˆë‹¤ ğŸ¶</p>',
      choices: ["ê³„ì†"]
    });

    // í˜ì˜¤ë„ ë‹¤ì‹œ í‰ê°€
    timeline.push({
      type: jsPsychHtmlSliderResponse,
      stimulus: "<p>ì´ ì‚¬ì§„ì— ëŒ€í•´ ì§€ê¸ˆ ëŠë‚€ í˜ì˜¤ ìˆ˜ì¤€ì„ ë‹¤ì‹œ í‰ê°€í•´ì£¼ì„¸ìš” (1~10).</p>",
      labels: ["1", "10"],
      min: 1,
      max: 10,
      step: 1,
      data: { phase: "rating_after", image: setB_images[i] }
    });
  }

  jsPsych.run(timeline);
</script>
</html>
